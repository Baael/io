<!DOCTYPE html>
<html>
<head>
  <title>Server</title>
</head>
<body style="background: #fff">

test channel: <code>test_room</code></br>

log:
<pre style="background: #f7f7f7" id="log"></pre>
  <script type="text/javascript">

    var dataReceived = function(data){
        console.log(data)
          window.location.hash = "?"+JSON.stringify(data)
    }

    var sendData = function(data){
          var toServer = /\#\!(.*)/.exec(window.location.hash)
          if (toServer) io.emit('proxy', JSON.parse(toServer.pop()))
    }

    window.initIO = function(){
          window.io = io.connect()
          window.io.on('rcv', dataReceived)
          window.location.hash = "#?READY"
          window.onhashchange = sendData;
          io.emit('logged', {})
    }

  </script>
  <script async src="/socket.io/socket.io.js" onLoad="initIO()"></script>
</body>
</html>